import "javatimer.thingml"
import "timer.thingml"
import "pim.thingml"
import "psm.thingml"
import "io.thingml"
import "test.thingml"

configuration X3D_MQTT_SIM_TEST {
    instance psm:MQTTDriver
    instance pim:PIM
    
    instance test:test

    instance g_temp:TimerJava
    instance g_humn:TimerJava

    instance es:EnergySaver

    // test
    connector test.t_toMQTT => psm.MQTT
    connector test.t_send_es_config => es.get_config
    
    connector test.g_send_cmd => es.confort_temp
    connector test.g_send_cmd => pim.human_input

    connector test.t_get_values => pim.human_output

    // PSM
    connector psm.provide_temp => pim.get_sensor
    connector psm.provide_lum_motion => es.get_cmd

    // Energy saver
    connector es.send_provide => pim.human_input

    // PIM
    connector pim.request_sensor => psm.require_val
    connector pim.request_actuator => psm.require_val
    connector pim.human_output => test.t_get_values

}