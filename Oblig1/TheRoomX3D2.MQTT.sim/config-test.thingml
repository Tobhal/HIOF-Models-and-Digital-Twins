import "javatimer.thingml"
import "timer.thingml"
import "pim.thingml"
import "psm.thingml"
import "io.thingml"
import "test.thingml"

configuration X3D_MQTT_SIM {
	instance psm:MQTTDriver
	instance pim:PIM

    instance es:EnergySaver

	instance g_temp:TimerJava
	instance g_humn:TimerJava

	instance test:Test
    
	// Test
	connector test.send_cmd => es.get_cmd
	connector test.send_cmd => pim.human_input

	// ES
	connector es.send_cmd => pim.human_input

	// pim
	connector pim.human_output => test.get_values
	connector pim.request_actuator => psm.require_val
	connector pim.request_sensor => psm.require_val

	// psm
	connector psm.provide_temp => pim.get_sensor
	connector psm.provide_lum_motion => es.get_cmd

	// Guards
	connector g_temp.timer => pim.guard_temperature
	connector g_humn.timer => pim.guard_human
	// connector g_temp.timer => pim.guard_temperature
	// connector g_humn.timer => pim.guard_human
}